--- linux-2.6.32.27/arch/arm/mach-ixp4xx/gtwx5715-pci.c.orig	2011-09-20 14:33:16.995242967 +0800
+++ linux-2.6.32.27/arch/arm/mach-ixp4xx/gtwx5715-pci.c	2011-09-20 15:40:31.109933394 +0800
@@ -41,11 +41,9 @@
  */
 void __init gtwx5715_pci_preinit(void)
 {
-	set_irq_type(GTWX5715_PCI_SLOT0_INTA_IRQ, IRQ_TYPE_LEVEL_LOW);
-	set_irq_type(GTWX5715_PCI_SLOT0_INTB_IRQ, IRQ_TYPE_LEVEL_LOW);
-	set_irq_type(GTWX5715_PCI_SLOT1_INTA_IRQ, IRQ_TYPE_LEVEL_LOW);
-	set_irq_type(GTWX5715_PCI_SLOT1_INTB_IRQ, IRQ_TYPE_LEVEL_LOW);
-
+	set_irq_type(GTWX5715_PCI_SLOT0_IRQ, IRQ_TYPE_LEVEL_LOW);
+	set_irq_type(GTWX5715_PCI_SLOT1_IRQ, IRQ_TYPE_LEVEL_LOW);
+	set_irq_type(GTWX5715_PCI_SLOT2_IRQ, IRQ_TYPE_LEVEL_LOW);
 	ixp4xx_pci_preinit();
 }
 
@@ -55,15 +53,16 @@
 	int rc;
 	static int gtwx5715_irqmap
 			[GTWX5715_PCI_SLOT_COUNT]
-			[GTWX5715_PCI_INT_PIN_COUNT] = {
-	{GTWX5715_PCI_SLOT0_INTA_IRQ, GTWX5715_PCI_SLOT0_INTB_IRQ},
-	{GTWX5715_PCI_SLOT1_INTA_IRQ, GTWX5715_PCI_SLOT1_INTB_IRQ},
+= {
+	{GTWX5715_PCI_SLOT0_IRQ},
+	{GTWX5715_PCI_SLOT1_IRQ},
+	{GTWX5715_PCI_SLOT2_IRQ},
 };
 
 	if (slot >= GTWX5715_PCI_SLOT_COUNT ||
 			pin >= GTWX5715_PCI_INT_PIN_COUNT) rc = -1;
 	else
-		rc = gtwx5715_irqmap[slot][pin-1];
+		rc = gtwx5715_irqmap[slot];
 
 	printk("%s: Mapped slot %d pin %d to IRQ %d\n", __func__, slot, pin, rc);
 	return(rc);
--- linux-2.6.32.27/arch/arm/mach-ixp4xx/include/mach/gtwx5715.h.orig	2011-09-20 15:30:25.037933328 +0800
+++ linux-2.6.32.27/arch/arm/mach-ixp4xx/include/mach/gtwx5715.h	2011-09-20 15:39:22.169933385 +0800
@@ -66,19 +66,20 @@
 */
 
 #define	GTWX5715_PCI_SLOT0_DEVID	0
-#define	GTWX5715_PCI_SLOT0_INTA_GPIO	GTWX5715_GPIO10
-#define	GTWX5715_PCI_SLOT0_INTB_GPIO	GTWX5715_GPIO11
-#define	GTWX5715_PCI_SLOT0_INTA_IRQ	GTWX5715_GPIO10_IRQ
-#define	GTWX5715_PCI_SLOT0_INTB_IRQ	GTWX5715_GPIO11_IRQ
+#define	GTWX5715_PCI_SLOT0_GPIO	GTWX5715_GPIO10
+#define	GTWX5715_PCI_SLOT0_IRQ	GTWX5715_GPIO10_IRQ
 
 #define	GTWX5715_PCI_SLOT1_DEVID	1
-#define	GTWX5715_PCI_SLOT1_INTA_GPIO	GTWX5715_GPIO11
-#define	GTWX5715_PCI_SLOT1_INTB_GPIO	GTWX5715_GPIO10
-#define	GTWX5715_PCI_SLOT1_INTA_IRQ	GTWX5715_GPIO11_IRQ
-#define	GTWX5715_PCI_SLOT1_INTB_IRQ	GTWX5715_GPIO10_IRQ
+#define	GTWX5715_PCI_SLOT1_GPIO	GTWX5715_GPIO11
+#define	GTWX5715_PCI_SLOT1_IRQ	GTWX5715_GPIO11_IRQ
 
-#define GTWX5715_PCI_SLOT_COUNT			2
-#define GTWX5715_PCI_INT_PIN_COUNT		2
+#define	GTWX5715_PCI_SLOT2_DEVID	2
+#define	GTWX5715_PCI_SLOT2_GPIO	GTWX5715_GPIO10
+#define	GTWX5715_PCI_SLOT2_IRQ	GTWX5715_GPIO10_IRQ
+
+
+#define GTWX5715_PCI_SLOT_COUNT			3
+#define GTWX5715_PCI_INT_PIN_COUNT		4
 
 /*
  * GPIO 5,6,7 and12 are hard wired to the Kendin KS8995M Switch
